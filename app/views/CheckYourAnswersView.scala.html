@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import views.html.components.{H1, H2, H3, Link, P}

@this(
  layout: templates.Layout,
  govukSummaryList: GovukSummaryList,
  hmrcListWithActions: HmrcListWithActions,
  h1: H1,
  h2: H2,
  h3: H3,
  link: Link,
  p: P
)

@(
  personalDetails: SummaryList,
  previousNames: Seq[ListWithActionsItem],
  currentAddress: SummaryList,
  previousAddresses: Seq[ListWithActionsItem],
  currentRelationship: SummaryList,
  previousRelationships: Seq[ListWithActionsItem],
  benefitHistory: SummaryList,
  employmentHistory: SummaryList,
  employers: Seq[ListWithActionsItem],
  supportingDocuments: SummaryList,
)(implicit request: Request[_], messages: Messages)

@layout(
  pageTitle = titleNoForm(messages("checkYourAnswers.title"))
) {

  @h1(
    content = messages("checkYourAnswers.heading")
  )

  @h2(
    content = messages("checkYourAnswers.personalDetails"),
    eId = "personal-details-heading"
  )

  @govukSummaryList(personalDetails)

  @h3(
    content = messages("checkYourAnswers.previousNames"),
    eId = "previous-names-heading"
  )

  @if(previousNames.nonEmpty) {
    @hmrcListWithActions(ListWithActions(items = previousNames))

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      inParagraph = true,
      link = routes.WhatIsYourPreviousNameController.onPageLoad(Index(previousNames.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAnotherPreviousName"
    )
  } else {
    @p(
      content = "checkYourAnswers.noPreviousNames",
      classes = Some("govuk-body govuk-!-margin-bottom-0")
    )

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      link = routes.WhatIsYourPreviousNameController.onPageLoad(Index(previousNames.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAPreviousName"
    )

  }

  @h2(
    content = messages("checkYourAnswers.addressHistory"),
    eId = "address-history-heading"
  )

  @govukSummaryList(currentAddress)

  @h3(
    content = messages("checkYourAnswers.previousAddresses"),
    eId = "previous-addresses-heading"
  )

  @if(previousAddresses.nonEmpty) {
    @hmrcListWithActions(ListWithActions(items = previousAddresses))

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      inParagraph = true,
      link = routes.IsYourPreviousAddressInUkController.onPageLoad(Index(previousAddresses.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAnotherPreviousAddress"
    )

  } else {
    @p(
      content = "checkYourAnswers.noPreviousAddresses",
      classes = Some("govuk-body govuk-!-margin-bottom-0")
    )

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      link = routes.IsYourPreviousAddressInUkController.onPageLoad(Index(previousAddresses.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAPreviousAddress"
    )

  }

  @h2(
    content = messages("checkYourAnswers.relationshipHistory"),
    eId = "relationship-history-heading"
  )

  @govukSummaryList(currentRelationship)

  @h3(
    content = messages("checkYourAnswers.previousRelationships"),
    eId = "previous-relationships-heading"
  )

  @if(previousRelationships.nonEmpty) {

    @hmrcListWithActions(ListWithActions(items = previousRelationships))

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      inParagraph = true,
      link = routes.PreviousRelationshipTypeController.onPageLoad(Index(previousRelationships.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAnotherPreviousRelationship"
    )

  } else {
    @p(
      content = "checkYourAnswers.noPreviousRelationships",
      classes = Some("govuk-body govuk-!-margin-bottom-0")
    )

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      link = routes.PreviousRelationshipTypeController.onPageLoad(Index(previousRelationships.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAPreviousRelationship"
    )

  }

  @h2(
    content = messages("checkYourAnswers.benefitHistory"),
    eId = "benefit-history-heading"
  )

  @govukSummaryList(benefitHistory.withCssClass("govuk-!-margin-bottom-9"))

  @h2(
    content = messages("checkYourAnswers.employmentHistory"),
    eId = "employment-history-heading"
  )

  @govukSummaryList(employmentHistory)

  @h3(
    content = messages("checkYourAnswers.employers"),
    eId = "employers-heading"
  )

  @if(employers.nonEmpty) {
    @hmrcListWithActions(ListWithActions(items = employers))

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      inParagraph = true,
      link = routes.WhatIsYourEmployersNameController.onPageLoad(Index(employers.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAnotherEmployer"
    )
  } else {
    @p(
      content = "checkYourAnswers.noEmployers",
      classes = Some("govuk-body govuk-!-margin-bottom-0")
    )

    @link(
      classes = Some("govuk-link govuk-!-margin-bottom-9 add-check-your-answers-section"),
      link = routes.WhatIsYourEmployersNameController.onPageLoad(Index(employers.length), CheckMode).url,
      messageKey = "checkYourAnswers.addAnEmployer"
    )
  }

  @h2(
    content = messages("checkYourAnswers.supportingDocuments"),
    eId = "supporting-documents-heading"
  )

  @govukSummaryList(supportingDocuments.withCssClass("govuk-!-margin-bottom-9"))

  @link(
    link = routes.PrintController.onPageLoad.url,
    messageKey = "site.continue",
    id = Some("continue"),
    classes = Some("govuk-button"),
    isButton = true
  )
}
